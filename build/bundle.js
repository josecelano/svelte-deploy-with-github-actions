var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t){t.parentNode.removeChild(t)}let l;function r(t){l=t}const c=[],h=[],p=[],u=[],b=Promise.resolve();let g=!1;function d(t){p.push(t)}let f=!1;const m=new Set;function y(){if(!f){f=!0;do{for(let t=0;t<c.length;t+=1){const e=c[t];r(e),v(e.$$)}for(r(null),c.length=0;h.length;)h.pop()();for(let t=0;t<p.length;t+=1){const e=p[t];m.has(e)||(m.add(e),e())}p.length=0}while(c.length);for(;u.length;)u.pop()();g=!1,f=!1,m.clear()}}function v(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(d)}}const w=new Set;function $(t,e){-1===t.$$.dirty[0]&&(c.push(t),g||(g=!0,b.then(y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function k(a,c,h,p,u,b,g,f=[-1]){const m=l;r(a);const v=a.$$={fragment:null,ctx:null,props:b,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:c.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:c.target||m.$$.root};g&&g(v.root);let k=!1;if(v.ctx=h?h(a,c.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return v.ctx&&u(v.ctx[t],v.ctx[t]=o)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](o),k&&$(a,t)),e})):[],v.update(),k=!0,o(v.before_update),v.fragment=!!p&&p(v.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);v.fragment&&v.fragment.l(t),t.forEach(i)}else v.fragment&&v.fragment.c();c.intro&&((j=a.$$.fragment)&&j.i&&(w.delete(j),j.i(H))),function(t,n,a,i){const{fragment:l,on_mount:r,on_destroy:c,after_update:h}=t.$$;l&&l.m(n,a),i||d((()=>{const n=r.map(e).filter(s);c?c.push(...n):o(n),t.$$.on_mount=[]})),h.forEach(d)}(a,c.target,c.anchor,c.customElement),y()}var j,H;r(m)}function j(e){let n;return{c(){var t,e,o,s;t="main",n=document.createElement(t),n.innerHTML='<h1 class="svelte-qbp9pv">How to deploy <a href="https://svelte.dev/">Svelte</a> apps to <a href="https://pages.github.com/">GitHub Pages</a> using <a href="https://docs.github.com/en/actions">GitHub Actions</a></h1>\n\t\n\tGitHub repo for this post: <a href="https://github.com/josecelano/svelte-deploy-with-github-actions">https://github.com/josecelano/svelte-deploy-with-github-actions</a> \n\t\n\t<h2>1. Install NPM package to create gh-pages branch</h2> \n\t<pre class="svelte-qbp9pv"><code class="svelte-qbp9pv">npm install gh-pages --save-dev</code></pre> \n\n\t<h2>2. Create a personal GitHub token</h2>\n\n\tYou are going to need a <a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token">GitHub personal token</a> with access to your public repos. After creating the token you can export it in your environment:\n\n\t<pre class="svelte-qbp9pv"><code class="svelte-qbp9pv">export GITHUB_TOKEN=ghp_RBJH34SD7KJDasAS6afJAHG3DJKHKASDHJAsdfg3SD</code></pre> \n\n\t<h2>3. Build the app and push it on the gh-pages branch</h2>\n\n\tI&#39;m using a <a href="https://www.npmjs.com/package/gh-pages">NPM package</a> to create the initial version of the gh-pages branch. This package only creates a temporary folder with a new git repo in order to push to gh-pages branch.\n\n\tThe <a href="https://github.com/josecelano/svelte-deploy-with-github-actions/blob/master/scripts/gh-pages.js">script</a> to do it it&#39;s very simple. You can see it <a href="https://github.com/josecelano/svelte-deploy-with-github-actions/blob/master/scripts/gh-pages.js">here</a>.<br/> \n\n\t<br/>\n\tSome people is using Git subtree: \n\t\n\t<ul><li><a href="https://www.fahdmurtaza.com/github-pages-deploying-a-subfolder-to-github-pages/">Github Pages: Deploying a subfolder to GitHub Pages (by Fahad Murtaza)</a></li> \n\t\t<li><a href="https://davidhallin.com/blog/deploying-a-static-site-to-github-pages/">Deploying a static site to a repo subtree and hosting it for free on github pages (by David Hallin)</a></li></ul>\n\n\tbut I do not want to add the build artifact to the master branch of the repo.<br/> \n\t<br/>\n\t\n\tAnd finally this is the command you can run to build and push the app:\n\t<pre class="svelte-qbp9pv"><code class="svelte-qbp9pv">npm run build &amp;&amp; ./scripts/gh-pages.js</code></pre>\t\n\tYou should see something like:\n\n\t<pre class="svelte-qbp9pv"><code class="svelte-qbp9pv">josecelano@josecelano:~/Documents/github/josecelano/svelte-deploy-with-github-actions$ npm run deploy\n\n&gt; svelte-deploy-with-github-actions@1.0.0 deploy /home/josecelano/Documents/github/josecelano/svelte-deploy-with-github-actions\n&gt; npm run build &amp;&amp; node ./scripts/gh-pages.js\n\n\n&gt; svelte-deploy-with-github-actions@1.0.0 build /home/josecelano/Documents/github/josecelano/svelte-deploy-with-github-actions\n&gt; rollup -c\n\n\nsrc/main.js â†’ public/build/bundle.js...\ncreated public/build/bundle.js in 685ms\nDeploy Complete!</code></pre>\t\n\n\tAnd you should have a new <a href="https://github.com/josecelano/svelte-deploy-with-github-actions/tree/gh-pages">gh-pages branch</a> on you GitHub repo with the production app.\n\n\t<h2>4. Application already published</h2>\t\t\n\n\tAt this point you should have the application already published on GitHub Pages on a URL like this:<br/> \n\t<br/> \n\t<a href="https://josecelano.github.io/svelte-deploy-with-github-actions/">https://josecelano.github.io/svelte-deploy-with-github-actions/</a><br/> \n\t<br/>\n\tI had to make some changes in the Svelte app index file in order to make it work. You have to use relative paths in the href attribute of the resouces:\n\n\t<pre class="svelte-qbp9pv"><code class="svelte-qbp9pv">&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n\t&lt;meta charset=&#39;utf-8&#39;&gt;\n\t&lt;meta name=&#39;viewport&#39; content=&#39;width=device-width,initial-scale=1&#39;&gt;\n\n\t&lt;title&gt;Svelte app&lt;/title&gt;\n\n\t&lt;link rel=&#39;icon&#39; type=&#39;image/png&#39; href=&#39;<b>./favicon.png&#39;&gt;</b>;\n\t&lt;link rel=&#39;stylesheet&#39; href=&#39;<b>./global.css&#39;&gt;</b>;\n\t&lt;link rel=&#39;stylesheet&#39; href=&#39;<b>./build/bundle.css&#39;&gt;</b>;\n\n\t&lt;script defer src=&#39;<b>./build/bundle.js&#39;&gt;&lt;/script&gt;</b>;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre> \n\n\t<h2>5. Adding the GitHub Workflow</h2>\n\n\tAt this point we can publish the app but only manually and we want to do it automatically using GitHub Actions.<br/>  \n\t<br/>\n\tWe have two options to create the GitHub workflow.<br/> \n\t<br/>\n\tThe first one is trying to replicate the same thing we do manually on the workflow.<br/> \n\t<br/>\n\tAnd the second option is to use an action from the <a href="https://github.com/marketplace/actions/deploy-to-github-pages">GitHub marketplace</a>. I&#39;m going to do the second one.\n\n\t<pre class="svelte-qbp9pv"><code class="svelte-qbp9pv"># This is a basic workflow to automatically build a Svelte app and deploy it to GitHub Pages\n\nname: Deploy to GitHub Pages\n\non:\n  push:\n  branches: [ master ]\n  workflow_dispatch:\n\njobs:\n  build:\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v2\n\n    - name: Install and Build\n      run: |\n        npm install\n        npm run build\n\t\t\t\n    - name: Deploy to GitHub Pages\n      uses: JamesIves/github-pages-deploy-action@4.1.5\n      with:\n        branch: gh-pages\n        folder: public</code></pre>\n\n\n\tYou can find the final workflow file here: <a href="https://github.com/josecelano/svelte-deploy-with-github-actions/blob/master/.github/workflows/deploy.yml">https://github.com/josecelano/svelte-deploy-with-github-actions/blob/master/.github/workflows/deploy.yml</a>',e=n,o="class",null==(s="svelte-qbp9pv")?e.removeAttribute(o):e.getAttribute(o)!==s&&e.setAttribute(o,s)},m(t,e){!function(t,e,n){t.insertBefore(e,n||null)}(t,n,e)},p:t,i:t,o:t,d(t){t&&i(n)}}}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),k(this,t,null,j,a,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
